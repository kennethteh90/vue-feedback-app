webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),o=a("mvHQ"),s=a.n(o),n=a("BO1k"),d=a.n(n),i={data:function(){return{orders:{},selectedOrder:null,formData:{feedbacks:[]},baseUrl:"https://food-delivery-api.herokuapp.com/orders/"}},computed:{order:function(){var e=this;return this.orders.find(function(t){return t.id===e.selectedOrder})}},methods:{fetchOrders:function(){var e=this;fetch(this.baseUrl).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()}).then(function(t){console.log(t.orders),e.orders=t.orders}).catch(function(e){console.log(e)})},handleClick:function(e){this.selectedOrder=e,this.formData={feedbacks:[{ratable_id:"",ratable_type:"",rating:0,comment:""}]},console.log("clicked"),console.log(this.selectedOrder);var t=!0,a=!1,r=void 0;try{for(var o,s=d()(this.order.order_items);!(t=(o=s.next()).done);t=!0){o.value;this.formData.feedbacks.push({ratable_id:"",ratable_type:"",rating:0,comment:""})}}catch(e){a=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw r}}},handleSubmit:function(){for(var e=1;e<=this.order.order_items.length;e++)this.formData.feedbacks[e].ratable_id=this.order.order_items[e-1].order_item_id,this.formData.feedbacks[e].ratable_type="OrderItem";this.formData.feedbacks[0].ratable_id=this.order.order_id,this.formData.feedbacks[0].ratable_type="DeliveryOrder";var t=this.baseUrl+this.order.order_id+"/feedbacks";fetch(t,{method:"POST",body:s()(this.formData),headers:new Headers({"Content-Type":"application/json"})}).catch(function(e){return console.error("Error:",e)}).then(function(e){return console.log("Success:",e)}),this.selectedOrder=null,alert("Thanks for your feedback!"),this.fetchOrders()}},mounted:function(){this.fetchOrders()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),e._v(" "),a("div",[0===Object.keys(e.orders).length?a("h3",[e._v("Nothing here yet! Head on over to our ordering page to get some awesome food!")]):e.orders.length?a("table",[e._m(1),e._v(" "),a("tbody",e._l(e.orders,function(t){return a("tr",{key:t.order_id},[a("td",[e._v(" "+e._s(t.order_id)+" ")]),e._v(" "),t.feedback_submitted?a("td",[e._v(" Thanks for sharing your feedback! ")]):t.feedback_submitted?e._e():a("td",[a("button",{attrs:{id:"show-modal"},on:{click:function(a){e.handleClick(t.order_id)}}},[e._v("Submit Feedback")])])])}))]):e._e()]),e._v(" "),e.selectedOrder?a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[e._t("header",[a("h1",[e._v("Feedback for Order "+e._s(e.selectedOrder))])])],2),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"modal-body"},[e._t("body",[a("form",{on:{submit:function(t){t.preventDefault(),e.handleSubmit()}}},[a("h2",[e._v("How was the food?")]),e._v(" "),e._l(e.order.order_items,function(t,r){return a("div",[a("h3",[e._v(" "+e._s(t.name)+" ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[r+1].rating,expression:"formData.feedbacks[index+1].rating"}],staticClass:"good",attrs:{type:"radio",id:"good"+r,value:"1"},domProps:{checked:e._q(e.formData.feedbacks[r+1].rating,"1")},on:{change:function(t){e.$set(e.formData.feedbacks[r+1],"rating","1")}}}),e._v(" "),a("label",{attrs:{for:"good"+r}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[r+1].rating,expression:"formData.feedbacks[index+1].rating"}],staticClass:"bad",attrs:{type:"radio",id:"bad"+r,value:"-1"},domProps:{checked:e._q(e.formData.feedbacks[r+1].rating,"-1")},on:{change:function(t){e.$set(e.formData.feedbacks[r+1],"rating","-1")}}}),e._v(" "),a("label",{attrs:{for:"bad"+r}}),e._v(" "),a("br"),e._v(" "),a("span",[e._v("Comment:")]),e._v(" "),a("br"),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[r+1].comment,expression:"formData.feedbacks[index+1].comment"}],attrs:{placeholder:"Leave your comments here!"},domProps:{value:e.formData.feedbacks[r+1].comment},on:{input:function(t){t.target.composing||e.$set(e.formData.feedbacks[r+1],"comment",t.target.value)}}})])}),e._v(" "),a("h2",[e._v("What about the delivery?")]),e._v(" "),a("h3",[e._v(" Courier ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[0].rating,expression:"formData.feedbacks[0].rating"}],staticClass:"good",attrs:{type:"radio",id:"good",value:"1"},domProps:{checked:e._q(e.formData.feedbacks[0].rating,"1")},on:{change:function(t){e.$set(e.formData.feedbacks[0],"rating","1")}}}),e._v(" "),a("label",{attrs:{for:"good"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[0].rating,expression:"formData.feedbacks[0].rating"}],staticClass:"bad",attrs:{type:"radio",id:"bad",value:"-1"},domProps:{checked:e._q(e.formData.feedbacks[0].rating,"-1")},on:{change:function(t){e.$set(e.formData.feedbacks[0],"rating","-1")}}}),e._v(" "),a("label",{attrs:{for:"bad"}}),e._v(" "),a("br"),e._v(" "),a("span",[e._v("Comment:")]),e._v(" "),a("br"),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.feedbacks[0].comment,expression:"formData.feedbacks[0].comment"}],attrs:{placeholder:"Leave your comments here!"},domProps:{value:e.formData.feedbacks[0].comment},on:{input:function(t){t.target.composing||e.$set(e.formData.feedbacks[0],"comment",t.target.value)}}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("button",{attrs:{type:"submit"}},[e._v("Submit")])],2)])],2),e._v(" "),a("div",{staticClass:"modal-footer"},[e._t("footer",[a("button",{staticClass:"modal-close-button",on:{click:function(t){e.selectedOrder=null}}},[e._v("\n                Close\n              ")])])],2)])])])]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Welcome to our feedback system")]),this._v(" "),t("h2",[this._v("Please tell us how your meal went so we can do even better next time!")]),this._v(" "),t("hr")])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("th",[this._v("Order ID")]),this._v(" "),t("th",[this._v("Feedback")])])}]};var l=a("VU/8")(i,c,!1,function(e){a("qW1N")},null,null).exports;r.a.config.productionTip=!1,new r.a({el:"#app",components:{App:l},template:"<App/>"})},qW1N:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b5035fab53f80d482152.js.map